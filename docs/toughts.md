# 考えたことなど

## 2025/04/16

### エラーハンドリング

saveの時にうまくいかなかったらエラーが起きるのは当たり前として、それを何度かトライできるようにしたいところ。

### プログラミングの考え方

あまりに意識したことがなかったが、一つの動作は一つのファイルで完結すべき的なことを考えており、
最近のプログラミングにおいてかなりファイルが分散する現状を不思議に思っていたが
そうではなく、そもそも自分が一つの動作と思っていたことが一つの動作ではなく、
高級なプログラマにとっては分離すべき概念であって、
それにしたがって分離しているに過ぎないだけであった。
そう思えるのは自分なりにプログラミングという行為に対する解像感が向上した結果ではあるのかもしれない。

## 2025/04/23

### 前回の「プログラミングの考え方」に付記して

いや、やはりそんなこともないらしい。

北先輩に話を伺う機会があったが、「一つの操作が複数のファイルに渡っていてわかりにくい。
だからLLMのコンテキストウインドウが足りなくなってしまうので、少なくとも現段階ではクリーンアーキテクチャは向いていない。」

みたいなお話をされていて、熟達したプログラマもそう思っているらしい。

なので理想と現実という妥協なのかもしれない。

## 2025/04/30

chatのツリー構造をanytreeに持たせたいのだが、entityレベルで外部ライブラリを用いて良いのか若干悩んでしまった。
このような例だと根幹を担っているという理解でinfraとは違う扱いをすれば…良いのかな…。

いまのところは結局enetityにanytreeがimportされて使われている。

## 2025/05/02

### port的な概念に関して

今まで「db_handleみたいな関数を作成してifを統一し、内部のロジックが変更されても基本的に互換性を持たせられる…」みたいなことを行なっていたが、
これは基本的にportにに類する概念のようだ。
着目点の根幹としては入出力の抽象化なので、solid原則のdの依存関係逆転に近しい考え方かもしれない。

## 2025/07/31

久しぶりにいじっているが、メモリの扱いとdbについて悩んでいる。

dbの設計をしっかりおこなうことを考え始めた途端、anytreeいらない説も結構出てきていて
dbのテーブルの設計とクエリの工夫だけで既存の分岐などは再現できそうだとかんじるが
そうするとdbへのアクセスが非常に頻繁になる気もする。

なのでdbなどの永続化層と、アプリケーションのメモリではどのように実際に区別すべきかがわかりかねている。
